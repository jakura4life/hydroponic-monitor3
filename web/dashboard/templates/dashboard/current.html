<h2>Current Sensor Data</h2>

<p>pH: <span id="ph">--</span></p>
<p>TDS: <span id="tds">--</span></p>
<p>Air Temp: <span id="temp">--</span></p>
<p>Humidity: <span id="humidity">--</span></p>
<p>Last update: <span id="updated">--</span></p>

<script>
async function fetchCurrentData() {
    try {
        const response = await fetch("/dashboard/api/current/");
        const data = await response.json();

        document.getElementById("ph").textContent = data.ph;
        document.getElementById("tds").textContent = data.tds;
        document.getElementById("temp").textContent = data.airTemp;
        document.getElementById("humidity").textContent = data.humidity;
        document.getElementById("updated").textContent =
            new Date().toLocaleTimeString();

    } catch (error) {
        console.error("Error fetching data:", error);
    }
}

// run immediately
fetchCurrentData();

// run every 60 seconds
setInterval(fetchCurrentData, 60000);
</script>